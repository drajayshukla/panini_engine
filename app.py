import streamlit as st
import json
import os

# рдкреЗрдЬ рд╕реЗрдЯрдЕрдк
st.set_page_config(page_title="рдЕрд╖реНрдЯрд╛рдзреНрдпрд╛рдпреА-рдпрдВрддреНрд░", layout="wide", initial_sidebar_state="expanded")

st.title("ЁЯХЙя╕П рдЕрд╖реНрдЯрд╛рдзреНрдпрд╛рдпреА-рдпрдВрддреНрд░ (The Paninian Engine)")
st.caption("рдПрдХ рдУрдкрди-рд╕реЛрд░реНрд╕ рдкрд╛рдгрд┐рдиреАрдп рд╡реНрдпрд╛рдХрд░рдг рдЗрдВрдЬрди | Developed by Dr. Ajay Shukla")

st.markdown("""
### рд╕реНрд╡рд╛рдЧрддрдореН!
рдпрд╣ рдЗрдВрдЬрди рдкрд╛рдгрд┐рдиреАрдп рдЕрд╖реНрдЯрд╛рдзреНрдпрд╛рдпреА рдХреЗ рд╕реВрддреНрд░реЛрдВ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рд╕рдВрд╕реНрдХреГрдд рд╢рдмреНрджреЛрдВ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рд╕рд┐рджреНрдз рдХрд░рддрд╛ рд╣реИред

**рдкреЗрдЬ рдЧрд╛рдЗрдб:**
1. тЪЩя╕П **Engine:** рдпрд╣рд╛рдБ рдЖрдк рдзрд╛рддреБ рдпрд╛ рдкреНрд░рддреНрдпрдп рд▓рд┐рдЦрдХрд░ рдЙрд╕рдХрд╛ 'рдЗрддреН-рд╕рдВрдЬреНрдЮрд╛' рдФрд░ 'рд╡реГрджреНрдзрд┐' рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред
2. ЁЯФН **Explorer:** рдпрд╣рд╛рдБ рдЖрдк 1500+ рдзрд╛рддреБрдУрдВ рдФрд░ рдкреНрд░рддреНрдпрдпреЛрдВ рдХреЗ рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЛ рдЦреЛрдЬ рд╕рдХрддреЗ рд╣реИрдВред
""")

st.markdown("---")

# рдХреНрд╡рд┐рдХ рдзрд╛рддреБ рд╕рд░реНрдЪ (Home Page Feature)
st.subheader("ЁЯФО рддреНрд╡рд░рд┐рдд рдзрд╛рддреБ рдЕрдиреНрд╡реЗрд╖рдг (Quick Search)")

@st.cache_data
def load_quick_db():
    path = 'data/dhatu_master_structured.json'
    if os.path.exists(path):
        with open(path, 'r', encoding='utf-8') as f:
            return json.load(f)
    return []

db = load_quick_db()
query = st.text_input("рдзрд╛рддреБ рдХрд╛ рдирд╛рдо рд▓рд┐рдЦреЗрдВ (рдЙрджрд╛: рднреВ, рдПрдзреН):")

if query:
    results = [d for d in db if query in d['mula_dhatu']]
    if results:
        st.write(f"рдХреБрд▓ {len(results)} рдкрд░рд┐рдгрд╛рдо рдорд┐рд▓реЗ:")
        st.table(results[:5]) # рдХреЗрд╡рд▓ рдЯреЙрдк 5 рджрд┐рдЦрд╛рдПрдВ
        st.info("рд╡рд┐рд╕реНрддреГрдд рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХреЗ рд▓рд┐рдП рд╕рд╛рдЗрдбрдмрд╛рд░ рд╕реЗ 'Engine' рдкреЗрдЬ рдкрд░ рдЬрд╛рдПрдВред")
    else:
        st.error("рдзрд╛рддреБ рдирд╣реАрдВ рдорд┐рд▓реАред")