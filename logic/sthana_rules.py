# logic/sthana_rules.py

STHANA_MAP = {
    "कण्ठ": ['अ', 'आ', 'क', 'ख', 'ग', 'घ', 'ङ', 'ह', 'ः'],
    "तालु": ['इ', 'ई', 'च', 'छ', 'ज', 'झ', 'ञ', 'य', 'श'],
    "मूर्धा": ['ऋ', 'ॠ', 'ट', 'ठ', 'ड', 'ढ', 'ण', 'र', 'ष'],
    "दन्त": ['ऌ', 'त', 'थ', 'द', 'ध', 'न', 'ल', 'स'],
    "ओष्ठ": ['उ', 'ऊ', 'प', 'फ', 'ब', 'भ', 'म'],  # 'व' यहाँ से हटा दिया गया है
    "नासिका": ['ङ', 'ञ', 'ण', 'न', 'म', 'ं'],
    "कण्ठतालु": ['ए', 'ऐ'],
    "कण्ठोष्ठ": ['ओ', 'औ'],
    "दन्तोष्ठ": ['व']
}


def apply_sthana_to_varna(varna_obj):
    """
    Varna ऑब्जेक्ट के उच्चारण स्थान को अष्टाध्यायी/शिक्षा नियमों के अनुसार अपडेट करना।
    """
    # शुद्ध वर्ण (जैसे 'क्' से 'क')
    base_char = varna_obj.char[0]

    found_sthanas = []
    for sthana, chars in STHANA_MAP.items():
        if base_char in chars:
            found_sthanas.append(sthana)

    # पञ्चम वर्णों के लिए 'कण्ठ + नासिका' जैसा कॉम्बो बनेगा
    varna_obj.sthana = " + ".join(found_sthanas) if found_sthanas else "अज्ञात"
    return varna_obj