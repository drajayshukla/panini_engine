"""
FILE: tests/test_prathama.py
TEST CASE: Rama (Ramah, Ramau, Ramah)
"""
import sys
import os

# Ensure imports work from the tests directory
sys.path.insert(0, os.path.abspath(os.path.join(os.path.dirname(__file__), '..')))

from engine_main import PrakriyaLogger
from logic.subanta_processor import SubantaProcessor

# ==============================================================================
# TEST 1: Prathama Ekavachana (1.1) -> R─Бmaс╕е (рд░рд╛рдордГ)
# ==============================================================================
def test_1_1_ramah():
    print("\n" + "="*60)
    print("ЁЯЪА TEST 1.1: R─Бma + Su (Prathama Ekavachana)")
    print("="*60)

    word = "рд░рд╛рдо"
    vibhakti = 1
    vacana = 1
    logger = PrakriyaLogger()

    # Execution
    final_form = SubantaProcessor.derive_pada(word, vibhakti, vacana, logger)
    history = logger.steps

    # Output Verification
    print(f"Input: {word}")
    print(f"тЖТ {word} + рд╕реБрдБ [ рдкреНрд░рдердореИрдХрд╡рдЪрдирд╡рд┐рд╡рдХреНрд╖рд╛рдпрд╛рдВ рд╕реНрд╡реМрдЬрд╕рдореМрдЯреН... рек.рез.реи рдЗрддрд┐ рд╕реБрдБ-рдкреНрд░рддреНрдпрдпрдГ ред ]")
    print(f"тЖТ {word} + рд╕реН [ рдЙрдкрджреЗрд╢реЗрд╜рдЬрдиреБрдирд╛рд╕рд┐рдХ рдЗрддреН рез.рей.реи рдЗрддрд┐ рдЗрддреНрд╕рдВрдЬреНрдЮрд╛ ред рддрд╕реНрдп рд▓реЛрдкрдГ рез.рей.реп ред ]")
    print(f"тЖТ рд░рд╛рдорд░реБрдБ  [ рдкрджрд╛рдиреНрдд-рд╕рдХрд╛рд░рд╕реНрдп рд╕рд╕рдЬреБрд╖реЛрдГ рд░реБрдГ рео.реи.ремрем рдЗрддрд┐ рд░реБрдБрддреНрд╡рдореН ред ]")
    print(f"тЖТ рд░рд╛рдорд░реН   [ рдЙрдкрджреЗрд╢реЗрд╜рдЬрдиреБрдирд╛рд╕рд┐рдХ рдЗрддреН... рдЗрддрд┐ рдЗрддреН-рд▓реЛрдкрдГ ред ]")
    print(f"тЖТ рд░рд╛рдордГ    [ рдЕрд╡рд╕рд╛рдиреЗ рдкрд░реЗ рдЦрд░рд╡рд╕рд╛рдирдпреЛрд░реНрд╡рд┐рд╕рд░реНрдЬрдиреАрдпрдГ рео.рей.резрел рдЗрддрд┐ рд╡рд┐рд╕рд░реНрдЧрдГ ред ]")

    print("-" * 60)
    print(f"тЬЕ RESULT: {final_form}")

    assert final_form == "рд░рд╛рдордГ"

# ==============================================================================
# TEST 2: Prathama Dvivachana (1.2) -> R─Бmau (рд░рд╛рдореМ)
# ==============================================================================
def test_1_2_ramau():
    print("\n" + "="*60)
    print("ЁЯЪА TEST 1.2: R─Бma + Au (Prathama Dvivachana)")
    print("="*60)

    word = "рд░рд╛рдо"
    vibhakti = 1
    vacana = 2
    logger = PrakriyaLogger()

    final_form = SubantaProcessor.derive_pada(word, vibhakti, vacana, logger)

    print(f"Input: {word}")
    print(f"тЖТ {word} + рдФ [ рек.рез.реи рдЗрддрд┐ рдФ-рдкреНрд░рддреНрдпрдпрдГ ред ]")
    print(f"тЖТ (рдкреНрд░рдердордпреЛрдГ рдкреВрд░реНрд╡рд╕рд╡рд░реНрдгрдГ рем.рез.резрежреи рдЗрддрд┐ рдкреНрд░рд╛рдкреНрддреМ... рдирд╛рджрд┐рдЪрд┐ рем.рез.резрежрек рдЗрддрд┐ рдирд┐рд╖реЗрдзрдГ) ")
    print(f"тЖТ рд░рд╛рдореМ [ рд╡реГрджреНрдзрд┐рд░реЗрдЪрд┐ рем.рез.реорео рдЗрддрд┐ рдкреВрд░реНрд╡рдкрд░рдпреЛрдГ рд╕реНрдерд╛рдиреЗ рд╡реГрджреНрдзрд┐-рдПрдХрд╛рджреЗрд╢рдГ (рдФ) ред ]")

    print("-" * 60)
    print(f"тЬЕ RESULT: {final_form}")

    assert final_form == "рд░рд╛рдореМ"

# ==============================================================================
# TEST 3: Prathama Bahuvachana (1.3) -> R─Бm─Бс╕е (рд░рд╛рдорд╛рдГ)
# ==============================================================================
def test_1_3_ramah_pl():
    print("\n" + "="*60)
    print("ЁЯЪА TEST 1.3: R─Бma + Jas (Prathama Bahuvachana)")
    print("="*60)

    word = "рд░рд╛рдо"
    vibhakti = 1
    vacana = 3
    logger = PrakriyaLogger()

    final_form = SubantaProcessor.derive_pada(word, vibhakti, vacana, logger)

    print(f"Input: {word}")
    print(f"тЖТ {word} + рдЬрд╕реН [ рек.рез.реи рдЗрддрд┐ рдЬрд╕реН-рдкреНрд░рддреНрдпрдпрдГ ред ]")
    print(f"тЖТ {word} + рдЕрд╕реН [ рдЪреБрдЯреВ рез.рей.рен рдЗрддрд┐ рдЬрдХрд╛рд░рд╕реНрдп рдЗрддреНрд╕рдВрдЬреНрдЮрд╛, рддрд╕реНрдп рд▓реЛрдкрдГ ред ]")
    print(f"тЖТ рд░рд╛рдорд╛рд╕реН [ рдкреНрд░рдердордпреЛрдГ рдкреВрд░реНрд╡рд╕рд╡рд░реНрдгрдГ рем.рез.резрежреи рдЗрддрд┐ рджреАрд░реНрдШрдГ (рдЖ) ред ]")
    print(f"тЖТ рд░рд╛рдорд╛рдГ [ рд╕рд╕рдЬреБрд╖реЛрдГ рд░реБрдГ рео.реи.ремрем, рдЦрд░рд╡рд╕рд╛рдирдпреЛрд░реНрд╡рд┐рд╕рд░реНрдЬрдиреАрдпрдГ рео.рей.резрел рдЗрддрд┐ рд╡рд┐рд╕рд░реНрдЧрдГ ред ]")

    print("-" * 60)
    print(f"тЬЕ RESULT: {final_form}")

    assert final_form == "рд░рд╛рдорд╛рдГ"

if __name__ == "__main__":
    test_1_1_ramah()
    test_1_2_ramau()
    test_1_3_ramah_pl()